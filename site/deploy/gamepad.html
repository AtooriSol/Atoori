<!DOCTYPE html>
<html lang="en">

<head>
    <title>Gamepad Tracker</title>
    <style>
        body {
            background-color: #1E1E1E;
            color: #AAAAAA;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 12px;
            margin: 0;
        }

        #output {
            margin: 20px;
            padding: 10px;
            border: 1px dashed #555555;
        }
    </style>
</head>

<body>
    <div id="output"></div>
    <div id="bottom"></div>

    <script>
        var output = document.getElementById("output");
        var bottom = document.getElementById("bottom");

        function addText(text) {
            output.innerHTML += text + "<br>";
            bottom.scrollIntoView();
        }

        window.addEventListener("gamepadconnected", function(e) {
            var pad = e.gamepad;
            var index = pad.index;
            console.log(pad);
            addText("Gamepad connected at index: " + pad.index);
            addText('id: ' + pad.id);
            addText('mapping: ' + pad.mapping);
            addText('webkitmapping: ' + pad.webkitmapping);
            addText('');

            setInterval(function() {
                var gamepads = navigator.getGamepads();
                if (gamepads.length > 0) {
                    var pad = gamepads[0];
                    if (pad) {
                        for (var i = 0; i < pad.axes.length; i++) {
                            addText("axes" + i + ": " + pad.axes[i]);
                        }
                        for (var i = 0; i < pad.buttons.length; i++) {
                            addText("button" + i + ": value=" + pad.buttons[i].value);
                        }                    
                        addText('');
                    }
                }
            }, 4000);            
        });
    </script>
</body>

</html>